<template>
  <div>
    <div class="register">
      <div v-if="signNav == 1">
        <div class="">
          <div
            class="header w-100 d-flex align-items-center justify-content-between"
          >
            <logo />
            <nuxt-link :to="localePath('/')" class="arrow">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="6"
                height="12"
                viewBox="0 0 6 12"
                fill="none"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M5.46849 0.414376C5.79194 0.673133 5.84438 1.1451 5.58562 1.46855L1.96044 6.00003L5.58562 10.5315C5.84438 10.855 5.79194 11.3269 5.46849 11.5857C5.14505 11.8444 4.67308 11.792 4.41432 11.4685L0.414321 6.46855C0.195189 6.19464 0.195189 5.80542 0.414321 5.53151L4.41432 0.531506C4.67308 0.20806 5.14505 0.155619 5.46849 0.414376Z"
                  fill="#2D3A4A"
                />
              </svg>
            </nuxt-link>
          </div>
        </div>
        <div class="text">
          <h3>انضم إلينا وابدأ رحلتك مع كود كار</h3>
          <span>أدخل بياناتك وانشئ حسابك الآن للاستفادة من كل ميزاتنا.</span>
        </div>

        <v-radio-group
          class="d-flex align-items-center justify-content-center main-radio"
          v-model="typeForm"
          inline
        >
          <div class="d-flex align-items-center radio">
            <v-radio
              id="radio-input-1"
              color="#DCB63B"
              value="individual"
            ></v-radio>
            <label
              for="radio-input-1"
              :class="{ active: typeForm == 'individual' }"
            >
              فرد
            </label>
          </div>
          <div class="d-flex align-items-center radio">
            <v-radio
              id="radio-input-2"
              color="#DCB63B"
              value="agency"
            ></v-radio>
            <label
              for="radio-input-2"
              :class="{ active: typeForm == 'agency' }"
            >
              معرض
            </label>
          </div>
          <div class="d-flex align-items-center radio">
            <v-radio
              id="radio-input-3"
              color="#DCB63B"
              value="exhibition"
            ></v-radio>
            <label
              for="radio-input-3"
              :class="{ active: typeForm == 'exhibition' }"
            >
              وكالة
            </label>
          </div>
        </v-radio-group>
        <div class="mainform">
          <div class="form">
            <div class="input">
              <label for=""> الاسم </label>
              <input
                type="text"
                placeholder="مثال : رضا"
                name=""
                v-model="form.name"
              />
              <span class="error-msg" v-if="v$.name.$error">{{
                v$.name.$errors[0].$message
              }}</span>
              <span class="error-msg" v-if="errors.name">{{
                errors.name[0]
              }}</span>
            </div>
            <div class="input">
              <label for=""> رقم الهاتف </label>
              <input
                type="tel"
                placeholder="مثال : 3333-5555-9999-55"
                name=""
                v-model="form.phone"
              />
              <span class="error-msg" v-if="v$.phone.$error">{{
                v$.phone.$errors[0].$message
              }}</span>
              <span class="error-msg" v-if="errors.phone">{{
                errors.phone[0]
              }}</span>
            </div>
            <div v-if="typeForm != 'individual'" class="input">
              <label for=""> رقم الهوية </label>
              <input
                type="text"
                placeholder="مثال : 3333-5555-9999-55"
                name=""
                v-model="form.id_number"
              />
            </div>
            <div v-if="typeForm != 'individual'" class="input">
              <label for=""> رقم السجل التجاري </label>
              <input
                type="text"
                placeholder="مثال : 3333-5555-9999-55"
                name=""
                v-model="form.commercial_register_namber"
              />
            </div>
            <div class="input">
              <label for=""> المدينة </label>
              <Dropdown
                v-model="selectedCountry"
                :options="countries"
                filter
                optionLabel="name"
                placeholder="ابها"
                class=""
              >
                <template #option="slotProps">
                  <div class="flex align-items-center">
                    <div>{{ slotProps.option.name }}</div>
                  </div>
                </template>
              </Dropdown>
              <span class="error-msg" v-if="v$.city_id.$error">{{
                v$.city_id.$errors[0].$message
              }}</span>
              <span class="error-msg" v-if="errors.city_id">{{
                errors.city_id[0]
              }}</span>
            </div>
            <div class="input pass">
              <label for=""> كلمة المرور </label>
              <input
                :type="passType"
                placeholder="***************"
                name=""
                v-model="form.password"
              />
              <div @click="changePass1()" class="icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="16"
                  viewBox="0 0 24 16"
                  fill="none"
                >
                  <path
                    d="M23.9204 7.6296C23.2116 6.0552 19.9696 0 12 0C4.0304 0 0.7884 6.0552 0.0796 7.6296C0.0264 7.748 0 7.8744 0 8C0 8.1256 0.0264 8.252 0.0796 8.3704C0.7884 9.9444 4.0304 16 12 16C19.9696 16 23.2116 9.9444 23.9204 8.3704C23.9736 8.252 24 8.1256 24 8C24 7.8744 23.9736 7.748 23.9204 7.6296ZM12 13.2C9.128 13.2 6.8 10.872 6.8 8C6.8 5.128 9.128 2.8 12 2.8C14.872 2.8 17.2 5.128 17.2 8C17.2 10.872 14.872 13.2 12 13.2Z"
                    fill="#90A3BF"
                  />
                  <path
                    d="M11.9999 11.6C13.9881 11.6 15.5999 9.98826 15.5999 8.00002C15.5999 6.01178 13.9881 4.40002 11.9999 4.40002C10.0117 4.40002 8.3999 6.01178 8.3999 8.00002C8.3999 9.98826 10.0117 11.6 11.9999 11.6Z"
                    fill="#90A3BF"
                  />
                </svg>
              </div>
            </div>
            <div class="input">
              <span class="error-msg" v-if="v$.password.$error">{{
                v$.password.$errors[0].$message
              }}</span>
              <span class="error-msg" v-if="errors.password">{{
                errors.password[0]
              }}</span>
            </div>
            <div class="input pass">
              <label for=""> تاكيد كلمة المرور </label>
              <input
                :type="passConfType"
                placeholder="***************"
                name=""
                v-model="form.password_confirmation"
              />
              <div @click="changePass2()" class="icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="16"
                  viewBox="0 0 24 16"
                  fill="none"
                >
                  <path
                    d="M23.9204 7.6296C23.2116 6.0552 19.9696 0 12 0C4.0304 0 0.7884 6.0552 0.0796 7.6296C0.0264 7.748 0 7.8744 0 8C0 8.1256 0.0264 8.252 0.0796 8.3704C0.7884 9.9444 4.0304 16 12 16C19.9696 16 23.2116 9.9444 23.9204 8.3704C23.9736 8.252 24 8.1256 24 8C24 7.8744 23.9736 7.748 23.9204 7.6296ZM12 13.2C9.128 13.2 6.8 10.872 6.8 8C6.8 5.128 9.128 2.8 12 2.8C14.872 2.8 17.2 5.128 17.2 8C17.2 10.872 14.872 13.2 12 13.2Z"
                    fill="#90A3BF"
                  />
                  <path
                    d="M11.9999 11.6C13.9881 11.6 15.5999 9.98826 15.5999 8.00002C15.5999 6.01178 13.9881 4.40002 11.9999 4.40002C10.0117 4.40002 8.3999 6.01178 8.3999 8.00002C8.3999 9.98826 10.0117 11.6 11.9999 11.6Z"
                    fill="#90A3BF"
                  />
                </svg>
              </div>
            </div>
            <div class="input">
              <span class="error-msg" v-if="v$.password_confirmation.$error">{{
                v$.password_confirmation.$errors[0].$message
              }}</span>
              <span class="error-msg" v-if="errors.password_confirmation">{{
                errors.password_confirmation[0]
              }}</span>
            </div>
          </div>
          <div class="d-flex align-item-center justify-content-center">
            <p>
              من خلال إنشاء حساب، فإنك توافق على
              <span>سياسة الخصوصية</span> الخاصة بنا،
              <span>والشروط والاحكام</span>.
            </p>
          </div>
          <div class="d-flex align-item-center justify-content-center">
            <button @click="registerFunc()" type="">متابعة</button>
          </div>
          <div class="d-flex align-item-center justify-content-center">
            <div class="d-flex align-items-center gap-2 linkk">
              <span>لديك حساب بالفعل ؟</span>
              <span @click="store.state.checkForm = 2" class="active"
                >تسجيل دخول</span
              >
            </div>
          </div>
          <div class="icons">
            <div class="icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
              >
                <path
                  d="M19.8008 6C19.8008 6 19.6055 4.62109 19.0039 4.01563C18.2422 3.21875 17.3906 3.21484 17 3.16797C14.2031 2.96484 10.0039 2.96484 10.0039 2.96484H9.99609C9.99609 2.96484 5.79688 2.96484 3 3.16797C2.60938 3.21484 1.75781 3.21875 0.996094 4.01563C0.394531 4.62109 0.203125 6 0.203125 6C0.203125 6 0 7.62109 0 9.23828V10.7539C0 12.3711 0.199219 13.9922 0.199219 13.9922C0.199219 13.9922 0.394531 15.3711 0.992187 15.9766C1.75391 16.7734 2.75391 16.7461 3.19922 16.832C4.80078 16.9844 10 17.0313 10 17.0313C10 17.0313 14.2031 17.0234 17 16.8242C17.3906 16.7773 18.2422 16.7734 19.0039 15.9766C19.6055 15.3711 19.8008 13.9922 19.8008 13.9922C19.8008 13.9922 20 12.375 20 10.7539V9.23828C20 7.62109 19.8008 6 19.8008 6ZM7.93359 12.5938V6.97266L13.3359 9.79297L7.93359 12.5938Z"
                  fill="#90A3BF"
                />
              </svg>
            </div>
            <div class="icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
              >
                <g clip-path="url(#clip0_188_16747)">
                  <path
                    d="M10 1.80078C12.6719 1.80078 12.9883 1.8125 14.0391 1.85937C15.0156 1.90234 15.543 2.06641 15.8945 2.20313C16.3594 2.38281 16.6953 2.60156 17.043 2.94922C17.3945 3.30078 17.6094 3.63281 17.7891 4.09766C17.9258 4.44922 18.0898 4.98047 18.1328 5.95312C18.1797 7.00781 18.1914 7.32422 18.1914 9.99219C18.1914 12.6641 18.1797 12.9805 18.1328 14.0313C18.0898 15.0078 17.9258 15.5352 17.7891 15.8867C17.6094 16.3516 17.3906 16.6875 17.043 17.0352C16.6914 17.3867 16.3594 17.6016 15.8945 17.7813C15.543 17.918 15.0117 18.082 14.0391 18.125C12.9844 18.1719 12.668 18.1836 10 18.1836C7.32813 18.1836 7.01172 18.1719 5.96094 18.125C4.98438 18.082 4.45703 17.918 4.10547 17.7813C3.64063 17.6016 3.30469 17.3828 2.95703 17.0352C2.60547 16.6836 2.39063 16.3516 2.21094 15.8867C2.07422 15.5352 1.91016 15.0039 1.86719 14.0313C1.82031 12.9766 1.80859 12.6602 1.80859 9.99219C1.80859 7.32031 1.82031 7.00391 1.86719 5.95312C1.91016 4.97656 2.07422 4.44922 2.21094 4.09766C2.39063 3.63281 2.60938 3.29688 2.95703 2.94922C3.30859 2.59766 3.64063 2.38281 4.10547 2.20313C4.45703 2.06641 4.98828 1.90234 5.96094 1.85937C7.01172 1.8125 7.32813 1.80078 10 1.80078ZM10 0C7.28516 0 6.94531 0.0117187 5.87891 0.0585938C4.81641 0.105469 4.08594 0.277344 3.45313 0.523438C2.79297 0.78125 2.23438 1.12109 1.67969 1.67969C1.12109 2.23438 0.78125 2.79297 0.523438 3.44922C0.277344 4.08594 0.105469 4.8125 0.0585938 5.875C0.0117188 6.94531 0 7.28516 0 10C0 12.7148 0.0117188 13.0547 0.0585938 14.1211C0.105469 15.1836 0.277344 15.9141 0.523438 16.5469C0.78125 17.207 1.12109 17.7656 1.67969 18.3203C2.23438 18.875 2.79297 19.2188 3.44922 19.4727C4.08594 19.7188 4.8125 19.8906 5.875 19.9375C6.94141 19.9844 7.28125 19.9961 9.99609 19.9961C12.7109 19.9961 13.0508 19.9844 14.1172 19.9375C15.1797 19.8906 15.9102 19.7188 16.543 19.4727C17.1992 19.2188 17.7578 18.875 18.3125 18.3203C18.8672 17.7656 19.2109 17.207 19.4648 16.5508C19.7109 15.9141 19.8828 15.1875 19.9297 14.125C19.9766 13.0586 19.9883 12.7188 19.9883 10.0039C19.9883 7.28906 19.9766 6.94922 19.9297 5.88281C19.8828 4.82031 19.7109 4.08984 19.4648 3.45703C19.2188 2.79297 18.8789 2.23438 18.3203 1.67969C17.7656 1.125 17.207 0.78125 16.5508 0.527344C15.9141 0.28125 15.1875 0.109375 14.125 0.0625C13.0547 0.0117188 12.7148 0 10 0Z"
                    fill="#90A3BF"
                  />
                  <path
                    d="M10 4.86328C7.16406 4.86328 4.86328 7.16406 4.86328 10C4.86328 12.8359 7.16406 15.1367 10 15.1367C12.8359 15.1367 15.1367 12.8359 15.1367 10C15.1367 7.16406 12.8359 4.86328 10 4.86328ZM10 13.332C8.16016 13.332 6.66797 11.8398 6.66797 10C6.66797 8.16016 8.16016 6.66797 10 6.66797C11.8398 6.66797 13.332 8.16016 13.332 10C13.332 11.8398 11.8398 13.332 10 13.332Z"
                    fill="#90A3BF"
                  />
                  <path
                    d="M16.5391 4.66016C16.5391 5.32422 16 5.85938 15.3398 5.85938C14.6758 5.85938 14.1406 5.32031 14.1406 4.66016C14.1406 3.99609 14.6797 3.46094 15.3398 3.46094C16 3.46094 16.5391 4 16.5391 4.66016Z"
                    fill="#90A3BF"
                  />
                </g>
                <defs>
                  <clipPath id="clip0_188_16747">
                    <rect width="20" height="20" fill="white" />
                  </clipPath>
                </defs>
              </svg>
            </div>
            <div class="icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
              >
                <g clip-path="url(#clip0_188_16745)">
                  <path
                    d="M10 0C4.4772 0 0 4.4772 0 10C0 14.6896 3.2288 18.6248 7.5844 19.7056V13.056H5.5224V10H7.5844V8.6832C7.5844 5.2796 9.1248 3.702 12.4664 3.702C13.1 3.702 14.1932 3.8264 14.6404 3.9504V6.7204C14.4044 6.6956 13.9944 6.6832 13.4852 6.6832C11.8456 6.6832 11.212 7.3044 11.212 8.9192V10H14.4784L13.9172 13.056H11.212V19.9268C16.1636 19.3288 20.0004 15.1128 20.0004 10C20 4.4772 15.5228 0 10 0Z"
                    fill="#90A3BF"
                  />
                </g>
                <defs>
                  <clipPath id="clip0_188_16745">
                    <rect width="20" height="20" fill="white" />
                  </clipPath>
                </defs>
              </svg>
            </div>
            <div class="icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
              >
                <path
                  d="M19.9277 14.5481C19.7898 14.1701 19.5242 13.9658 19.2229 13.8024C19.1667 13.7718 19.1157 13.7411 19.0697 13.7207C18.9778 13.6747 18.8858 13.6288 18.7939 13.5828C17.8542 13.0823 17.1188 12.4592 16.6131 11.7136C16.4701 11.5042 16.3425 11.2795 16.2403 11.0497C16.1944 10.9271 16.1995 10.8556 16.2301 10.7892C16.2608 10.7381 16.3016 10.6973 16.3527 10.6615C16.5161 10.5543 16.6795 10.447 16.7919 10.3755C16.9911 10.2427 17.1545 10.1406 17.2567 10.0691C17.6397 9.7984 17.9104 9.5124 18.0789 9.19065C18.3189 8.74122 18.3496 8.21518 18.1657 7.74022C17.9104 7.06607 17.2771 6.65239 16.5059 6.65239C16.3425 6.65239 16.1841 6.66771 16.0207 6.70346C15.9799 6.71368 15.9339 6.72389 15.893 6.73411C15.8981 6.27446 15.8879 5.78928 15.8471 5.30921C15.7041 3.62895 15.1116 2.75052 14.4988 2.05084C14.1055 1.61163 13.6459 1.23881 13.1301 0.947698C12.2006 0.416553 11.1434 0.145874 9.99427 0.145874C8.84516 0.145874 7.79309 0.416553 6.86359 0.947698C6.34776 1.23881 5.88812 1.61163 5.49487 2.05084C4.88201 2.75052 4.29469 3.63406 4.14658 5.30921C4.10572 5.78928 4.09551 6.27446 4.10061 6.73411C4.05976 6.72389 4.0189 6.71368 3.97294 6.70346C3.81461 6.66771 3.65119 6.65239 3.49286 6.65239C2.72168 6.65239 2.0884 7.07118 1.83304 7.74022C1.64918 8.21518 1.67982 8.74122 1.91986 9.19065C2.0884 9.5124 2.35907 9.7984 2.74211 10.0691C2.84425 10.1406 3.00258 10.2427 3.20686 10.3755C3.31411 10.447 3.47243 10.5492 3.63076 10.6513C3.68694 10.687 3.7329 10.733 3.76865 10.7892C3.79929 10.8556 3.8044 10.9271 3.75333 11.0599C3.65119 11.2846 3.52861 11.5042 3.38561 11.7085C2.89022 12.4337 2.17522 13.0517 1.26614 13.5471C0.78607 13.8024 0.285569 13.9709 0.0710683 14.5481C-0.0872535 14.9822 0.0148896 15.4725 0.418355 15.8912C0.566463 16.0445 0.740106 16.1772 0.929071 16.2794C1.32232 16.4939 1.74111 16.6624 2.18032 16.7799C2.27225 16.8054 2.35397 16.8412 2.43057 16.8922C2.57868 17.0199 2.55825 17.214 2.75233 17.5C2.84936 17.6481 2.97704 17.7758 3.12004 17.8779C3.53372 18.1639 3.99847 18.1792 4.48876 18.1997C4.93308 18.215 5.43358 18.2354 6.01069 18.4244C6.25073 18.501 6.49587 18.6542 6.78187 18.833C7.47134 19.2569 8.41106 19.834 9.98917 19.834C11.5673 19.834 12.5121 19.2517 13.2067 18.8279C13.4927 18.6542 13.7378 18.501 13.9676 18.4244C14.5396 18.2354 15.0453 18.215 15.4896 18.1997C15.9799 18.1792 16.4446 18.1639 16.8583 17.8779C17.0319 17.7554 17.1749 17.6021 17.2771 17.4183C17.4201 17.1782 17.415 17.0097 17.5478 16.8922C17.6193 16.8412 17.701 16.8054 17.7827 16.785C18.2219 16.6675 18.6509 16.499 19.0493 16.2794C19.2484 16.1721 19.4323 16.0291 19.5855 15.8606L19.5906 15.8555C19.989 15.4469 20.086 14.9668 19.9277 14.5481ZM18.5283 15.2988C17.6754 15.7687 17.1034 15.7176 16.6642 16.0036C16.2863 16.2436 16.511 16.7646 16.2403 16.9535C15.9033 17.1833 14.9125 16.9382 13.6357 17.3621C12.5785 17.7094 11.9095 18.7155 10.0096 18.7155C8.10973 18.7155 7.45602 17.7145 6.38351 17.3621C5.10673 16.9382 4.11594 17.1885 3.77886 16.9535C3.50819 16.7646 3.72779 16.2436 3.35497 16.0036C2.91065 15.7176 2.34375 15.7687 1.49086 15.2988C0.944392 14.9975 1.25593 14.8136 1.43468 14.7268C4.52962 13.2304 5.02501 10.9169 5.04544 10.7432C5.07097 10.5338 5.10162 10.3704 4.8718 10.161C4.65219 9.95672 3.67161 9.34897 3.39583 9.16001C2.9464 8.84336 2.74722 8.53183 2.89533 8.14368C2.99747 7.87811 3.24772 7.77597 3.50819 7.77597C3.5899 7.77597 3.67161 7.78618 3.75333 7.8015C4.24872 7.90875 4.7288 8.1539 5.00458 8.2254C5.04033 8.23561 5.07098 8.24072 5.10673 8.24072C5.25483 8.24072 5.3059 8.16411 5.29569 7.99557C5.26505 7.45422 5.18844 6.40214 5.27526 5.41646C5.39273 4.06306 5.82683 3.38892 6.34776 2.79649C6.59801 2.51049 7.76755 1.27456 10.0096 1.27456C12.2516 1.27456 13.4212 2.50538 13.6714 2.79138C14.1924 3.38381 14.6265 4.05796 14.7439 5.41135C14.8308 6.39703 14.7541 7.44911 14.7184 7.99047C14.7082 8.16922 14.7593 8.23561 14.9074 8.23561C14.9431 8.23561 14.9738 8.2305 15.0095 8.22029C15.2853 8.1539 15.7654 7.90365 16.2608 7.7964C16.3425 7.77597 16.4242 7.77086 16.5059 7.77086C16.7664 7.77086 17.0166 7.873 17.1188 8.13857C17.2669 8.52672 17.0677 8.83825 16.6183 9.1549C16.3476 9.34386 15.367 9.95162 15.1423 10.1559C14.9125 10.3653 14.9431 10.5287 14.9686 10.7381C14.9891 10.9118 15.4845 13.2253 18.5794 14.7217C18.7633 14.8085 19.0697 14.9975 18.5283 15.2988Z"
                  fill="#90A3BF"
                />
              </svg>
            </div>
            <div class="icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
              >
                <path
                  d="M15.2721 1.58655H18.0833L11.9416 8.60612L19.1668 18.1582H13.5095L9.07852 12.3649L4.00845 18.1582H1.19552L7.76469 10.65L0.833496 1.58655H6.63442L10.6397 6.88182L15.2721 1.58655ZM14.2854 16.4755H15.8432L5.78799 3.18082H4.11638L14.2854 16.4755Z"
                  fill="#90A3BF"
                />
              </svg>
            </div>
            <div class="icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
              >
                <path
                  d="M14.2269 0H10.8563V13.6232C10.8563 15.2464 9.56 16.5797 7.94672 16.5797C6.33345 16.5797 5.03708 15.2464 5.03708 13.6232C5.03708 12.029 6.30465 10.7246 7.86031 10.6667V7.24639C4.4321 7.30433 1.6665 10.1159 1.6665 13.6232C1.6665 17.1594 4.48972 20 7.97554 20C11.4613 20 14.2845 17.1304 14.2845 13.6232V6.63767C15.5521 7.56522 17.1077 8.11594 18.7498 8.14495V4.72464C16.2147 4.63768 14.2269 2.55072 14.2269 0Z"
                  fill="#90A3BF"
                />
              </svg>
            </div>
          </div>
          <div class="d-flex align-item-center justify-content-center">
            <div class="d-flex align-items-center gap-3 logo">
              <span>تم تطويره بواسطة</span>
              <img class="" src="~/assets/images/blue-logo.png" alt="" />
            </div>
          </div>
        </div>
      </div>

      <div v-if="signNav == 2" class="otp">
        <div class="">
          <div
            class="header w-100 d-flex align-items-center justify-content-between"
          >
            <logo />
            <div @click="signNav = 1" class="arrow">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="6"
                height="12"
                viewBox="0 0 6 12"
                fill="none"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M5.46849 0.414376C5.79194 0.673133 5.84438 1.1451 5.58562 1.46855L1.96044 6.00003L5.58562 10.5315C5.84438 10.855 5.79194 11.3269 5.46849 11.5857C5.14505 11.8444 4.67308 11.792 4.41432 11.4685L0.414321 6.46855C0.195189 6.19464 0.195189 5.80542 0.414321 5.53151L4.41432 0.531506C4.67308 0.20806 5.14505 0.155619 5.46849 0.414376Z"
                  fill="#2D3A4A"
                />
              </svg>
            </div>
          </div>
        </div>
        <div class="mainform">
          <div
            class="d-flex otp-container align-items-center flex-column justify-content-center text-center"
          >
            <h3 style="margin-top: 32px">رمز التفعيل</h3>
            <p style="margin-top: 16px; margin-bottom: 56px">
              ارسلنا كود تحقق عبر رسالة نصية إلى {{ form.phone }} يرجى إدخال
              الكود في الخانة المخصصة أدناه
            </p>
            <v-otp-input
              v-model="otp"
              :length="4"
              placeholder="-"
              style="direction: ltr !important; margin-bottom: 14px"
            ></v-otp-input>
            <span class="error-msg" v-if="error">{{error}}</span>
            <span>اعد ارسال الكود</span>
            <div>
              <button @click="otpFunc()">انشاء حساب</button>
              <div class="icons-container">
                <div class="icons">
                  <div class="icon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="20"
                      height="20"
                      viewBox="0 0 20 20"
                      fill="none"
                    >
                      <path
                        d="M19.8008 6C19.8008 6 19.6055 4.62109 19.0039 4.01563C18.2422 3.21875 17.3906 3.21484 17 3.16797C14.2031 2.96484 10.0039 2.96484 10.0039 2.96484H9.99609C9.99609 2.96484 5.79688 2.96484 3 3.16797C2.60938 3.21484 1.75781 3.21875 0.996094 4.01563C0.394531 4.62109 0.203125 6 0.203125 6C0.203125 6 0 7.62109 0 9.23828V10.7539C0 12.3711 0.199219 13.9922 0.199219 13.9922C0.199219 13.9922 0.394531 15.3711 0.992187 15.9766C1.75391 16.7734 2.75391 16.7461 3.19922 16.832C4.80078 16.9844 10 17.0313 10 17.0313C10 17.0313 14.2031 17.0234 17 16.8242C17.3906 16.7773 18.2422 16.7734 19.0039 15.9766C19.6055 15.3711 19.8008 13.9922 19.8008 13.9922C19.8008 13.9922 20 12.375 20 10.7539V9.23828C20 7.62109 19.8008 6 19.8008 6ZM7.93359 12.5938V6.97266L13.3359 9.79297L7.93359 12.5938Z"
                        fill="#90A3BF"
                      />
                    </svg>
                  </div>
                  <div class="icon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="20"
                      height="20"
                      viewBox="0 0 20 20"
                      fill="none"
                    >
                      <g clip-path="url(#clip0_188_16747)">
                        <path
                          d="M10 1.80078C12.6719 1.80078 12.9883 1.8125 14.0391 1.85937C15.0156 1.90234 15.543 2.06641 15.8945 2.20313C16.3594 2.38281 16.6953 2.60156 17.043 2.94922C17.3945 3.30078 17.6094 3.63281 17.7891 4.09766C17.9258 4.44922 18.0898 4.98047 18.1328 5.95312C18.1797 7.00781 18.1914 7.32422 18.1914 9.99219C18.1914 12.6641 18.1797 12.9805 18.1328 14.0313C18.0898 15.0078 17.9258 15.5352 17.7891 15.8867C17.6094 16.3516 17.3906 16.6875 17.043 17.0352C16.6914 17.3867 16.3594 17.6016 15.8945 17.7813C15.543 17.918 15.0117 18.082 14.0391 18.125C12.9844 18.1719 12.668 18.1836 10 18.1836C7.32813 18.1836 7.01172 18.1719 5.96094 18.125C4.98438 18.082 4.45703 17.918 4.10547 17.7813C3.64063 17.6016 3.30469 17.3828 2.95703 17.0352C2.60547 16.6836 2.39063 16.3516 2.21094 15.8867C2.07422 15.5352 1.91016 15.0039 1.86719 14.0313C1.82031 12.9766 1.80859 12.6602 1.80859 9.99219C1.80859 7.32031 1.82031 7.00391 1.86719 5.95312C1.91016 4.97656 2.07422 4.44922 2.21094 4.09766C2.39063 3.63281 2.60938 3.29688 2.95703 2.94922C3.30859 2.59766 3.64063 2.38281 4.10547 2.20313C4.45703 2.06641 4.98828 1.90234 5.96094 1.85937C7.01172 1.8125 7.32813 1.80078 10 1.80078ZM10 0C7.28516 0 6.94531 0.0117187 5.87891 0.0585938C4.81641 0.105469 4.08594 0.277344 3.45313 0.523438C2.79297 0.78125 2.23438 1.12109 1.67969 1.67969C1.12109 2.23438 0.78125 2.79297 0.523438 3.44922C0.277344 4.08594 0.105469 4.8125 0.0585938 5.875C0.0117188 6.94531 0 7.28516 0 10C0 12.7148 0.0117188 13.0547 0.0585938 14.1211C0.105469 15.1836 0.277344 15.9141 0.523438 16.5469C0.78125 17.207 1.12109 17.7656 1.67969 18.3203C2.23438 18.875 2.79297 19.2188 3.44922 19.4727C4.08594 19.7188 4.8125 19.8906 5.875 19.9375C6.94141 19.9844 7.28125 19.9961 9.99609 19.9961C12.7109 19.9961 13.0508 19.9844 14.1172 19.9375C15.1797 19.8906 15.9102 19.7188 16.543 19.4727C17.1992 19.2188 17.7578 18.875 18.3125 18.3203C18.8672 17.7656 19.2109 17.207 19.4648 16.5508C19.7109 15.9141 19.8828 15.1875 19.9297 14.125C19.9766 13.0586 19.9883 12.7188 19.9883 10.0039C19.9883 7.28906 19.9766 6.94922 19.9297 5.88281C19.8828 4.82031 19.7109 4.08984 19.4648 3.45703C19.2188 2.79297 18.8789 2.23438 18.3203 1.67969C17.7656 1.125 17.207 0.78125 16.5508 0.527344C15.9141 0.28125 15.1875 0.109375 14.125 0.0625C13.0547 0.0117188 12.7148 0 10 0Z"
                          fill="#90A3BF"
                        />
                        <path
                          d="M10 4.86328C7.16406 4.86328 4.86328 7.16406 4.86328 10C4.86328 12.8359 7.16406 15.1367 10 15.1367C12.8359 15.1367 15.1367 12.8359 15.1367 10C15.1367 7.16406 12.8359 4.86328 10 4.86328ZM10 13.332C8.16016 13.332 6.66797 11.8398 6.66797 10C6.66797 8.16016 8.16016 6.66797 10 6.66797C11.8398 6.66797 13.332 8.16016 13.332 10C13.332 11.8398 11.8398 13.332 10 13.332Z"
                          fill="#90A3BF"
                        />
                        <path
                          d="M16.5391 4.66016C16.5391 5.32422 16 5.85938 15.3398 5.85938C14.6758 5.85938 14.1406 5.32031 14.1406 4.66016C14.1406 3.99609 14.6797 3.46094 15.3398 3.46094C16 3.46094 16.5391 4 16.5391 4.66016Z"
                          fill="#90A3BF"
                        />
                      </g>
                      <defs>
                        <clipPath id="clip0_188_16747">
                          <rect width="20" height="20" fill="white" />
                        </clipPath>
                      </defs>
                    </svg>
                  </div>
                  <div class="icon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="20"
                      height="20"
                      viewBox="0 0 20 20"
                      fill="none"
                    >
                      <g clip-path="url(#clip0_188_16745)">
                        <path
                          d="M10 0C4.4772 0 0 4.4772 0 10C0 14.6896 3.2288 18.6248 7.5844 19.7056V13.056H5.5224V10H7.5844V8.6832C7.5844 5.2796 9.1248 3.702 12.4664 3.702C13.1 3.702 14.1932 3.8264 14.6404 3.9504V6.7204C14.4044 6.6956 13.9944 6.6832 13.4852 6.6832C11.8456 6.6832 11.212 7.3044 11.212 8.9192V10H14.4784L13.9172 13.056H11.212V19.9268C16.1636 19.3288 20.0004 15.1128 20.0004 10C20 4.4772 15.5228 0 10 0Z"
                          fill="#90A3BF"
                        />
                      </g>
                      <defs>
                        <clipPath id="clip0_188_16745">
                          <rect width="20" height="20" fill="white" />
                        </clipPath>
                      </defs>
                    </svg>
                  </div>
                  <div class="icon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="20"
                      height="20"
                      viewBox="0 0 20 20"
                      fill="none"
                    >
                      <path
                        d="M19.9277 14.5481C19.7898 14.1701 19.5242 13.9658 19.2229 13.8024C19.1667 13.7718 19.1157 13.7411 19.0697 13.7207C18.9778 13.6747 18.8858 13.6288 18.7939 13.5828C17.8542 13.0823 17.1188 12.4592 16.6131 11.7136C16.4701 11.5042 16.3425 11.2795 16.2403 11.0497C16.1944 10.9271 16.1995 10.8556 16.2301 10.7892C16.2608 10.7381 16.3016 10.6973 16.3527 10.6615C16.5161 10.5543 16.6795 10.447 16.7919 10.3755C16.9911 10.2427 17.1545 10.1406 17.2567 10.0691C17.6397 9.7984 17.9104 9.5124 18.0789 9.19065C18.3189 8.74122 18.3496 8.21518 18.1657 7.74022C17.9104 7.06607 17.2771 6.65239 16.5059 6.65239C16.3425 6.65239 16.1841 6.66771 16.0207 6.70346C15.9799 6.71368 15.9339 6.72389 15.893 6.73411C15.8981 6.27446 15.8879 5.78928 15.8471 5.30921C15.7041 3.62895 15.1116 2.75052 14.4988 2.05084C14.1055 1.61163 13.6459 1.23881 13.1301 0.947698C12.2006 0.416553 11.1434 0.145874 9.99427 0.145874C8.84516 0.145874 7.79309 0.416553 6.86359 0.947698C6.34776 1.23881 5.88812 1.61163 5.49487 2.05084C4.88201 2.75052 4.29469 3.63406 4.14658 5.30921C4.10572 5.78928 4.09551 6.27446 4.10061 6.73411C4.05976 6.72389 4.0189 6.71368 3.97294 6.70346C3.81461 6.66771 3.65119 6.65239 3.49286 6.65239C2.72168 6.65239 2.0884 7.07118 1.83304 7.74022C1.64918 8.21518 1.67982 8.74122 1.91986 9.19065C2.0884 9.5124 2.35907 9.7984 2.74211 10.0691C2.84425 10.1406 3.00258 10.2427 3.20686 10.3755C3.31411 10.447 3.47243 10.5492 3.63076 10.6513C3.68694 10.687 3.7329 10.733 3.76865 10.7892C3.79929 10.8556 3.8044 10.9271 3.75333 11.0599C3.65119 11.2846 3.52861 11.5042 3.38561 11.7085C2.89022 12.4337 2.17522 13.0517 1.26614 13.5471C0.78607 13.8024 0.285569 13.9709 0.0710683 14.5481C-0.0872535 14.9822 0.0148896 15.4725 0.418355 15.8912C0.566463 16.0445 0.740106 16.1772 0.929071 16.2794C1.32232 16.4939 1.74111 16.6624 2.18032 16.7799C2.27225 16.8054 2.35397 16.8412 2.43057 16.8922C2.57868 17.0199 2.55825 17.214 2.75233 17.5C2.84936 17.6481 2.97704 17.7758 3.12004 17.8779C3.53372 18.1639 3.99847 18.1792 4.48876 18.1997C4.93308 18.215 5.43358 18.2354 6.01069 18.4244C6.25073 18.501 6.49587 18.6542 6.78187 18.833C7.47134 19.2569 8.41106 19.834 9.98917 19.834C11.5673 19.834 12.5121 19.2517 13.2067 18.8279C13.4927 18.6542 13.7378 18.501 13.9676 18.4244C14.5396 18.2354 15.0453 18.215 15.4896 18.1997C15.9799 18.1792 16.4446 18.1639 16.8583 17.8779C17.0319 17.7554 17.1749 17.6021 17.2771 17.4183C17.4201 17.1782 17.415 17.0097 17.5478 16.8922C17.6193 16.8412 17.701 16.8054 17.7827 16.785C18.2219 16.6675 18.6509 16.499 19.0493 16.2794C19.2484 16.1721 19.4323 16.0291 19.5855 15.8606L19.5906 15.8555C19.989 15.4469 20.086 14.9668 19.9277 14.5481ZM18.5283 15.2988C17.6754 15.7687 17.1034 15.7176 16.6642 16.0036C16.2863 16.2436 16.511 16.7646 16.2403 16.9535C15.9033 17.1833 14.9125 16.9382 13.6357 17.3621C12.5785 17.7094 11.9095 18.7155 10.0096 18.7155C8.10973 18.7155 7.45602 17.7145 6.38351 17.3621C5.10673 16.9382 4.11594 17.1885 3.77886 16.9535C3.50819 16.7646 3.72779 16.2436 3.35497 16.0036C2.91065 15.7176 2.34375 15.7687 1.49086 15.2988C0.944392 14.9975 1.25593 14.8136 1.43468 14.7268C4.52962 13.2304 5.02501 10.9169 5.04544 10.7432C5.07097 10.5338 5.10162 10.3704 4.8718 10.161C4.65219 9.95672 3.67161 9.34897 3.39583 9.16001C2.9464 8.84336 2.74722 8.53183 2.89533 8.14368C2.99747 7.87811 3.24772 7.77597 3.50819 7.77597C3.5899 7.77597 3.67161 7.78618 3.75333 7.8015C4.24872 7.90875 4.7288 8.1539 5.00458 8.2254C5.04033 8.23561 5.07098 8.24072 5.10673 8.24072C5.25483 8.24072 5.3059 8.16411 5.29569 7.99557C5.26505 7.45422 5.18844 6.40214 5.27526 5.41646C5.39273 4.06306 5.82683 3.38892 6.34776 2.79649C6.59801 2.51049 7.76755 1.27456 10.0096 1.27456C12.2516 1.27456 13.4212 2.50538 13.6714 2.79138C14.1924 3.38381 14.6265 4.05796 14.7439 5.41135C14.8308 6.39703 14.7541 7.44911 14.7184 7.99047C14.7082 8.16922 14.7593 8.23561 14.9074 8.23561C14.9431 8.23561 14.9738 8.2305 15.0095 8.22029C15.2853 8.1539 15.7654 7.90365 16.2608 7.7964C16.3425 7.77597 16.4242 7.77086 16.5059 7.77086C16.7664 7.77086 17.0166 7.873 17.1188 8.13857C17.2669 8.52672 17.0677 8.83825 16.6183 9.1549C16.3476 9.34386 15.367 9.95162 15.1423 10.1559C14.9125 10.3653 14.9431 10.5287 14.9686 10.7381C14.9891 10.9118 15.4845 13.2253 18.5794 14.7217C18.7633 14.8085 19.0697 14.9975 18.5283 15.2988Z"
                        fill="#90A3BF"
                      />
                    </svg>
                  </div>
                  <div class="icon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="20"
                      height="20"
                      viewBox="0 0 20 20"
                      fill="none"
                    >
                      <path
                        d="M15.2721 1.58655H18.0833L11.9416 8.60612L19.1668 18.1582H13.5095L9.07852 12.3649L4.00845 18.1582H1.19552L7.76469 10.65L0.833496 1.58655H6.63442L10.6397 6.88182L15.2721 1.58655ZM14.2854 16.4755H15.8432L5.78799 3.18082H4.11638L14.2854 16.4755Z"
                        fill="#90A3BF"
                      />
                    </svg>
                  </div>
                  <div class="icon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="20"
                      height="20"
                      viewBox="0 0 20 20"
                      fill="none"
                    >
                      <path
                        d="M14.2269 0H10.8563V13.6232C10.8563 15.2464 9.56 16.5797 7.94672 16.5797C6.33345 16.5797 5.03708 15.2464 5.03708 13.6232C5.03708 12.029 6.30465 10.7246 7.86031 10.6667V7.24639C4.4321 7.30433 1.6665 10.1159 1.6665 13.6232C1.6665 17.1594 4.48972 20 7.97554 20C11.4613 20 14.2845 17.1304 14.2845 13.6232V6.63767C15.5521 7.56522 17.1077 8.11594 18.7498 8.14495V4.72464C16.2147 4.63768 14.2269 2.55072 14.2269 0Z"
                        fill="#90A3BF"
                      />
                    </svg>
                  </div>
                </div>
                <div class="d-flex align-item-center justify-content-center">
                  <div class="d-flex align-items-center gap-3 logo">
                    <span>تم تطويره بواسطة</span>
                    <img class="" src="~/assets/images/blue-logo.png" alt="" />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import useValidate from "@vuelidate/core";
import axios from "axios";
import {
  required,
  email,
  sameAs,
  minLength,
  helpers,
} from "@vuelidate/validators";
import { useStore } from "~/store";
let store = useStore;
const localePath = useLocalePath();
const { locale } = useI18n();

let type = ref(0);
let passType = ref("password");
let passConfType = ref("password");

const selectedCountry = ref();
const countries = ref([
  { name: "Australia", code: "AU" },
  { name: "Brazil", code: "BR" },
  { name: "China", code: "CN" },
  { name: "Egypt", code: "EG" },
  { name: "France", code: "FR" },
  { name: "Germany", code: "DE" },
  { name: "India", code: "IN" },
  { name: "Japan", code: "JP" },
  { name: "Spain", code: "ES" },
  { name: "United States", code: "US" },
]);

const changePass1 = () => {
  passType.value = passType.value === "password" ? "text" : "password";
};
const changePass2 = () => {
  passConfType.value = passConfType.value === "password" ? "text" : "password";
};
let otp = ref("");
let signNav = ref(1);

let phoneNum = ref(null);

let typeForm = ref("individual");
const handleButtonClick = (value) => {
  store.commit("changeFormCheck", value);
  console.log(store.state.checkForm);
};

let pending = ref(false);

let form = ref({
  name: "",
  phone: "",
  id_number: "",
  city_id: 1,
  commercial_register_namber: "",
  password: "",
  password_confirmation: "",
});

const handleImageChange = (event) => {
  const file = event.target.files[0];
  if (file) {
    form.value.image = file;
  }
};

let value1 = ref("value is required");
let value2 = ref("The email field is required");
let value3 = ref("Invalid email format");
let value4 = ref("This field should be at least 8 characters long");
if (locale.value == "ar") {
  value1.value = "هذا الحقل مطلوبة";
  value2.value = "حقل البريد الإلكتروني مطلوب";
  value3.value = "تنسيق البريد الإلكتروني غير صالح";
  value4.value = "يجب أن يكون هذا الحقل 8 أحرف على الأقل";
} else {
  value1.value = "value is required";
  value2.value = "The email field is required";
  value3.value = "Invalid email format";
  value4.value = "This field should be at least 8 characters long";
}

const rules = {
  name: { required: helpers.withMessage(value1.value, required) },
  city_id: { required: helpers.withMessage(value1.value, required) },
  phone: { required: helpers.withMessage(value1.value, required) },
  // email: {
  //   required: helpers.withMessage(value2.value, required),
  //   email: helpers.withMessage(value3.value, email),
  // },
  password: {
    required: helpers.withMessage(value1.value, required),
    minLength: helpers.withMessage(value4.value, minLength(8)),
  },
  password_confirmation: {
    required: helpers.withMessage(value1.value, required),
    // sameAs: sameAs(form.value.password)
  },
};
let errors = ref([]);
let error = ref();
let emailError = ref(null);
const v$ = useValidate(rules, form);
const registerFunc = async () => {
  pending.value = true;
  let check = await v$.value.$validate();
  let formBody = new FormData();
  formBody.append("name", form.value.name);
  formBody.append("phone", form.value.phone);

  formBody.append("type", typeForm.value);
  formBody.append("city_id", form.value.city_id);
  formBody.append("password", form.value.password);
  formBody.append("password_confirmation", form.value.password_confirmation);
  if (typeForm.value != "individual") {
    formBody.append("id_number", form.value.id_number);
    formBody.append(
      "commercial_register_namber",
      form.value.commercial_register_namber
    );
  }
  if (check) {
    try {
      let result = await axios.post(`${getUrl()}/register`, formBody, {
        headers: {
          "Content-Language": `${locale.value}`,
        },
      });
      if (result.status >= 200) {
        console.log(result.data.data);
        // phoneNum.value = result.data.data.vendor.phone;
        signNav.value = 2;
        otp.value = result.data.data.vendor.verification_code;
        pending.value = false;
        errors.value = [];
      }
    } catch (errorss) {
      console.log(errorss);
      if (errorss.response) {
        pending.value = false;
        errors.value = errorss.response.data.errors;
      }
    }
  }
};

const otpFunc = async () => {
  pending.value = true;
  let formBody = new FormData();
  formBody.append("otp", parseInt(otp.value));
  formBody.append("phone", form.value.phone);
  try {
    let result = await axios.post(`${getUrl()}/verify-otp`, formBody,
    {
      // params: {
      //   otp: parseInt(otp.value),
      //   phone: form.value.phone
      // },
      headers: {
        "Content-Language": `${locale.value}`,
      },
    });
    if (result.status >= 200) {
      if (process.client) {
        store.commit("changeFormCheck", 2);
        pending.value = false;
        error.value = '';
      }
    }
    console.log(result.data.data);
  } catch (errorss) {
    if (errorss.response) {
      pending.value = false;
      error.value = errorss.response.data.errors;
    }
  }
};

onMounted(() => {

});


</script>

<style lang="scss" scoped></style>
